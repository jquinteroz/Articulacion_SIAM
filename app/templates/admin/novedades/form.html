{% extends "admin/base_admin.html" %}

{% block title %}{{ 'Editar' if novedad else 'Nueva' }} Novedad - Admin{% endblock %}

{% block content %}

<!-- Header Section - Estilo limpio y profesional -->
<div class="bg-sena-green rounded-xl md:rounded-2xl shadow-lg p-4 md:p-8 mb-4 md:mb-8">
    <!-- Breadcrumb -->
    <nav class="text-white/80 text-xs md:text-sm mb-3 md:mb-4 flex items-center">
        <a href="{{ url_for('admin.dashboard') }}" class="hover:text-white transition-colors flex items-center">
            <i class="fas fa-home mr-1"></i> Dashboard
        </a>
        <span class="mx-2">/</span>
        <a href="{{ url_for('admin.novedades') }}" class="hover:text-white transition-colors">
            Novedades
        </a>
        <span class="mx-2">/</span>
        <span class="text-white font-semibold">{{ 'Editar' if novedad else 'Nueva' }}</span>
    </nav>
    
    <!-- Título -->
    <h1 class="text-2xl md:text-4xl font-bold text-white mb-1 md:mb-2 flex items-center">
        <i class="fas fa-{% if novedad %}edit{% else %}bell{% endif %} mr-2 md:mr-3"></i>
        {{ 'Editar Novedad' if novedad else 'Nueva Novedad' }}
    </h1>
    <p class="text-sm md:text-lg text-white">
        {% if novedad %}
        Modifique la información de la novedad
        {% else %}
        Complete el formulario para agregar una nueva novedad
        {% endif %}
    </p>
</div>

<!-- Formulario -->
<form method="POST" enctype="multipart/form-data" class="space-y-4 md:space-y-6">
    <!-- Información Principal -->
    <div class="bg-white rounded-xl md:rounded-2xl shadow-lg overflow-hidden">
        <div class="px-4 md:px-6 py-3 md:py-4 bg-gray-50 border-b-2 border-gray-200">
            <h2 class="text-base md:text-xl font-bold text-gray-800 flex items-center">
                <i class="fas fa-info-circle text-sena-green mr-2"></i>
                Información Principal
            </h2>
        </div>
        
        <div class="p-4 md:p-6 space-y-4 md:space-y-6">
            <!-- Título -->
            <div>
                <label for="titulo" class="block text-xs md:text-sm font-bold text-gray-700 mb-1.5 md:mb-2">
                    <i class="fas fa-heading text-sena-green mr-1"></i> Título
                    <span class="text-red-500">*</span>
                </label>
                <input 
                    type="text" 
                    id="titulo" 
                    name="titulo" 
                    value="{{ novedad.titulo if novedad else '' }}"
                    class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-lg md:rounded-xl focus:ring-2 focus:ring-sena-green focus:border-sena-green transition-all duration-200 outline-none text-sm md:text-base"
                    placeholder="Ingrese el título de la novedad"
                    required
                >
            </div>

            <!-- Contenido -->
            <div>
                <label for="contenido" class="block text-xs md:text-sm font-bold text-gray-700 mb-1.5 md:mb-2">
                    <i class="fas fa-align-left text-sena-green mr-1"></i> Contenido
                    <span class="text-red-500">*</span>
                </label>
                <textarea 
                    id="contenido" 
                    name="contenido" 
                    rows="8"
                    class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-lg md:rounded-xl focus:ring-2 focus:ring-sena-green focus:border-sena-green transition-all duration-200 outline-none text-sm md:text-base"
                    placeholder="Escriba el contenido de la novedad"
                    required
                >{{ novedad.contenido if novedad else '' }}</textarea>
            </div>

            <!-- Fecha de Publicación -->
            <div>
                <label for="fecha_publicacion" class="block text-xs md:text-sm font-bold text-gray-700 mb-1.5 md:mb-2">
                    <i class="fas fa-calendar-alt text-sena-green mr-1"></i> Fecha de Publicación
                </label>
                <input 
                    type="date" 
                    id="fecha_publicacion" 
                    name="fecha_publicacion" 
                    value="{{ novedad.fecha_publicacion.strftime('%Y-%m-%d') if novedad and novedad.fecha_publicacion else '' }}"
                    class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-lg md:rounded-xl focus:ring-2 focus:ring-sena-green focus:border-sena-green transition-all duration-200 outline-none text-sm md:text-base"
                >
                <p class="mt-1 text-xs md:text-sm text-gray-500">
                    <i class="fas fa-info-circle mr-1"></i>
                    Deje en blanco para usar la fecha actual
                </p>
            </div>

            <!-- Imagen -->
            <div>
                <label for="imagen" class="block text-xs md:text-sm font-bold text-gray-700 mb-1.5 md:mb-2">
                    <i class="fas fa-image text-sena-green mr-1"></i> Imagen
                </label>
                <input 
                    type="file" 
                    id="imagen" 
                    name="imagen" 
                    accept="image/*"
                    class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-200 rounded-lg md:rounded-xl focus:ring-2 focus:ring-sena-green focus:border-sena-green transition-all duration-200 outline-none bg-white text-sm md:text-base"
                >
                <p class="mt-1 text-xs md:text-sm text-gray-500">
                    <i class="fas fa-info-circle mr-1"></i>
                    Formatos permitidos: JPG, PNG, GIF
                </p>
                {% if novedad and novedad.imagen_url %}
                <div class="mt-3">
                    <p class="text-xs md:text-sm text-gray-600 mb-2">Imagen actual:</p>
                    <img src="{{ novedad.imagen_url }}" alt="Imagen actual" class="max-w-full md:max-w-xs rounded-lg shadow-md">
                </div>
                {% endif %}
            </div>

            <!-- Destacado -->
            <div class="flex items-center">
                <input 
                    type="checkbox" 
                    id="destacado" 
                    name="destacado" 
                    {{ 'checked' if novedad and novedad.destacado else '' }}
                    class="w-4 h-4 md:w-5 md:h-5 text-sena-green border-2 border-gray-300 rounded focus:ring-2 focus:ring-sena-green"
                >
                <label for="destacado" class="ml-2 md:ml-3 text-xs md:text-sm font-bold text-gray-700">
                    <i class="fas fa-star text-yellow-500 mr-1"></i>
                    Marcar como destacado
                </label>
            </div>
        </div>
    </div>

    <!-- Botones de Acción -->
    <div class="flex flex-col sm:flex-row items-center justify-end gap-3 md:gap-4">
        <a href="{{ url_for('admin.novedades') }}" class="w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 bg-gray-100 text-gray-700 font-bold rounded-lg md:rounded-xl hover:bg-gray-200 transition-all duration-200 text-center text-sm md:text-base">
            <i class="fas fa-times mr-2"></i>
            Cancelar
        </a>
        <button type="submit" class="w-full sm:w-auto px-4 md:px-6 py-2.5 md:py-3 bg-gradient-to-r from-sena-green to-sena-green-dark text-white font-bold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-200 text-sm md:text-base">
            <i class="fas fa-save mr-2"></i>
            {{ 'Actualizar' if novedad else 'Crear' }} Novedad
        </button>
    </div>
</form>

{% endblock %}
